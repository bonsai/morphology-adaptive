# Morphology Adaptive Race Game - 構成ドキュメント

## 概要
このゲームは、Three.jsを用いたJavaScriptベースの3Dレースゲームであり、元のPython研究リポジトリにおける形態適応の概念をシミュレートしている。プレイヤーは、異なる地形タイプに対応して自身の形状を変化させるキャラクターを操作する。

## ファイル構造
```
/workspace/
├── index.html          # ゲームインターフェースのメインHTMLファイル
├── script.js           # ゲームロジックとThree.js実装
├── README.md           # この構成ドキュメント
└── .gitignore          # Git無視ファイル
```

## ファイル説明

### index.html
ゲームのインターフェースを設定：
- 3Dシーンのレンダリング用canvas要素
- ラップ数、タイマー、速度、形態タイプを表示するUI要素
- スタート画面とエンド画面（指示とコントロール）
- CDNからThree.jsライブラリとscript.jsファイルを読み込み
- ゲームコンテナに応じたレスポンシブスタイル

### script.js
ゲーム機能を実装するコアJavaScriptファイル：
- Three.jsのシーン、カメラ、レンダラーの初期化
- ティルスノットジオメトリを使用したレーストラックの作成
- 異なる素材で表現された地形ブロックの追加
- キャラクター（両足歩行形態）をカプセルと球体ジオメトリで作成
- キーボード入力による移動制御（矢印キー／WASD）
- ラップカウンティングとタイム計測のゲーム状態管理
- 実時間でのUI更新
- スタートおよび再起動機能によるゲームフロー制御

### .gitignore
一時ファイルやシステム固有のファイルをバージョン管理から除外する標準的なgit無視ファイル。

## 主要コンポーネント

### シーン設定
- 調整可能な位置・視点を持つパースペクティブカメラ
- 実際のレンダリングに適したアンビエントライトとディレクショナルライト
- サイドブルーの背景色

### レーストラック
- トーラスノットジオメトリで作られた円形パス
- トラック周囲に配置された地形ブロック（異なる表面タイプを表す）
- 地形タイプごとの視覚的区別（土・芝生）

### プレイヤーキャラクター
- カプセルと球体ジオメトリを使用した両足歩行設計
- ボディパーツ（ボディ、頭、脚）をグループ化したメッシュ構造
- 移動用の位置・回転制御

### ゲームメカニクス
- 距離走行に基づくラップカウンティングシステム
- レース完了時間の計測タイマー
- 速度計算と表示
- 形態タイプインジケータ（現時点では静的「両足歩行」）

### ユーザインターフェース
- 実時間で更新されるラップ数、経過時間、現在速度の表示
- ゲーム説明とコントロールを含むスタート画面
- 最終時間の表示と再起動オプションを備えたエンド画面
- キーボードコントロール：矢印キーまたはWASDで移動、スペースキーでブレーキ／逆走

## 技術実装のポイント
- CDNからのThree.js r128を使用
- スムーズなアニメーションループのためにrequestAnimationFrameを利用
- キーボードイベントリスナーでプレイヤー入力を処理
- 三つのジオメトリベクトル数学を使って位置・回転を計算
- 速度と加速を含む基本的な物理シミュレーション
- ウィンドウサイズ変更に対応するレスポンシブデザイン

この実装は、元の研究リポジトリの形態適応の概念を捉えつつ、ブラウザ上で魅力的なレースゲーム体験を提供している。
